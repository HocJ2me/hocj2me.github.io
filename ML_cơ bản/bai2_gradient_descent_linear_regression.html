<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>BÃ i 2 â€“ Dá»± Ã¡n dá»± Ä‘oÃ¡n giÃ¡ nhÃ  báº±ng Linear Regression</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #eef1f7;
        padding: 20px 40px;
        color: #111827;
        line-height: 1.7;
    }
    h1 { color: #1d4ed8; }
    h2 { color: #1e3a8a; margin-top: 28px; }
    h3 { color: #334155; margin-top: 18px; }
    p, li { font-size: 15.5px; }
    .card {
        background: #ffffff;
        padding: 22px;
        border-radius: 14px;
        box-shadow: 0 4px 14px rgba(15,23,42,0.12);
        margin-bottom: 24px;
    }
    pre {
        background: #0f172a;
        color: #e2e8f0;
        padding: 14px;
        border-radius: 10px;
        overflow-x: auto;
        font-size: 14px;
        white-space: pre-wrap;
    }
    code { font-family: Consolas, "Fira Code", monospace; }
    button {
        padding: 7px 12px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        margin-top: 6px;
        font-size: 13px;
    }
    .toggle-btn {
        background: #2563eb; color: #fff; margin-right: 6px;
    }
    .copy-btn {
        background: #1e40af; color: #fff;
    }
    .console {
        background: #020617;
        color: #a5f3fc;
        padding: 15px;
        border-radius: 8px;
        font-family: monospace;
        height: 260px;
        overflow-y: auto;
        white-space: pre-line;
        font-size: 14px;
        border: 1px solid #1f2937;
    }
    .highlight {
        padding: 12px;
        background: #fff7d6;
        border-left: 5px solid #f59e0b;
        border-radius: 8px;
        margin-top: 10px;
        font-size: 15px;
    }
    table {
        border-collapse: collapse;
        margin-top: 8px;
        font-size: 14px;
    }
    th, td {
        border: 1px solid #cbd5e1;
        padding: 6px 10px;
        text-align: center;
    }
    th {
        background: #e0ecff;
    }
    .two-col {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .two-col > div {
        flex: 1;
        min-width: 260px;
    }
    canvas {
        background: #f9fafb;
        border-radius: 8px;
        border: 1px solid #cbd5e1;
    }
    @media (max-width: 768px) {
        body { padding: 16px; }
    }
</style>
</head>

<body>

<h1>ğŸ“ BÃ i 2 â€“ Dá»± Ã¡n Dá»± Ä‘oÃ¡n GiÃ¡ nhÃ  báº±ng Linear Regression</h1>

<div class="card">
    <h2>I. MÃ´ táº£ dá»± Ã¡n: BÃ i toÃ¡n dá»± Ä‘oÃ¡n giÃ¡ nhÃ </h2>
    <p>Trong bÃ i 2, chÃºng ta xÃ¢y dá»±ng má»™t <b>dá»± Ã¡n nhá» nhÆ°ng ráº¥t thá»±c táº¿</b>: dÃ¹ng kiáº¿n thá»©c toÃ¡n & láº­p trÃ¬nh Ä‘á»ƒ <b>dá»± Ä‘oÃ¡n giÃ¡ nhÃ </b>.</p>

    <h3>1. Ká»‹ch báº£n thá»±c táº¿</h3>
    <ul>
        <li>Báº¡n lÃ  má»™t tÆ° váº¥n báº¥t Ä‘á»™ng sáº£n.</li>
        <li>Báº¡n cÃ³ dá»¯ liá»‡u cÃ¡c cÄƒn nhÃ  Ä‘Ã£ bÃ¡n trÆ°á»›c Ä‘Ã¢y: diá»‡n tÃ­ch vÃ  giÃ¡ bÃ¡n.</li>
        <li>Khi cÃ³ khÃ¡ch há»i: â€œNhÃ  50mÂ² thÃ¬ giÃ¡ khoáº£ng bao nhiÃªu?â€ â€“ báº¡n muá»‘n cÃ³ má»™t <b>mÃ´ hÃ¬nh AI nhá»</b> tráº£ lá»i giÃºp.</li>
    </ul>

    <h3>2. Dá»¯ liá»‡u sá»­ dá»¥ng trong bÃ i</h3>
    <p>Äá»ƒ Ä‘Æ¡n giáº£n, ta dÃ¹ng dá»¯ liá»‡u giáº£ láº­p nhá»:</p>
    <table>
        <tr><th>STT</th><th>Diá»‡n tÃ­ch (mÂ²) â€“ x</th><th>GiÃ¡ bÃ¡n (triá»‡u) â€“ y</th></tr>
        <tr><td>1</td><td>40</td><td>900</td></tr>
        <tr><td>2</td><td>60</td><td>1400</td></tr>
        <tr><td>3</td><td>80</td><td>1800</td></tr>
        <tr><td>4</td><td>100</td><td>2300</td></tr>
    </table>

    <div class="highlight">
        <b>Má»¥c tiÃªu cá»§a mÃ´ hÃ¬nh:</b><br>
        Há»c tá»« 4 Ä‘iá»ƒm dá»¯ liá»‡u trÃªn, tÃ¬m ra má»™t Ä‘Æ°á»ng tháº³ng <code>y = wÂ·x + b</code> sao cho:
        <br>â€“ Gáº§n vá»›i cÃ¡c Ä‘iá»ƒm Ä‘Ã£ biáº¿t nháº¥t cÃ³ thá»ƒ.<br>
        â€“ DÃ¹ng Ä‘Æ°á»£c Ä‘á»ƒ dá»± Ä‘oÃ¡n cho cÃ¡c diá»‡n tÃ­ch khÃ¡c (50mÂ², 70mÂ²,...).
    </div>
</div>

<div class="card">
    <h2>II. MÃ´ hÃ¬nh Linear Regression cho giÃ¡ nhÃ </h2>

    <h3>1. Dáº¡ng hÃ m mÃ´ hÃ¬nh</h3>
    <p>Ta giáº£ sá»­ má»‘i quan há»‡ giá»¯a diá»‡n tÃ­ch nhÃ  vÃ  giÃ¡ nhÃ  lÃ  gáº§n tuyáº¿n tÃ­nh, nÃªn dÃ¹ng mÃ´ hÃ¬nh:</p>
    <pre>Å· = wÂ·x + b</pre>
    <ul>
        <li>Å·: giÃ¡ nhÃ  mÃ´ hÃ¬nh dá»± Ä‘oÃ¡n (triá»‡u)</li>
        <li>x: diá»‡n tÃ­ch (mÂ²)</li>
        <li>w: â€œgiÃ¡ tÄƒng thÃªmâ€ khi diá»‡n tÃ­ch tÄƒng 1mÂ² (Ä‘á»™ dá»‘c)</li>
        <li>b: giÃ¡ cÆ¡ báº£n (khi x=0 â€“ chá»‰ lÃ  tham sá»‘ Ä‘á»ƒ mÃ´ hÃ¬nh linh hoáº¡t hÆ¡n)</li>
    </ul>

    <h3>2. HÃ m máº¥t mÃ¡t (Loss function)</h3>
    <p>MÃ´ hÃ¬nh khÃ´ng thá»ƒ chÃ­nh xÃ¡c 100% vá»›i má»i Ä‘iá»ƒm, nÃªn ta Ä‘o â€œÄ‘á»™ saiâ€ báº±ng MSE:</p>
    <pre>L(w, b) = (1/n) Â· Î£ (Å·áµ¢ âˆ’ yáµ¢)Â²  =  (1/n) Â· Î£ (wÂ·xáµ¢ + b âˆ’ yáµ¢)Â²</pre>
    <p>Trong Ä‘Ã³:</p>
    <ul>
        <li>n: sá»‘ dá»¯ liá»‡u (á»Ÿ Ä‘Ã¢y n = 4)</li>
        <li>(xáµ¢, yáµ¢): dá»¯ liá»‡u tháº­t</li>
        <li>Å·áµ¢: giÃ¡ mÃ´ hÃ¬nh dá»± Ä‘oÃ¡n cho xáµ¢</li>
    </ul>

    <div class="highlight">
        <b>Má»¥c tiÃªu chÃ­nh:</b> TÃ¬m bá»™ (w, b) sao cho giÃ¡ trá»‹ L(w, b) nhá» nháº¥t.<br>
        â†’ ÄÃ¢y chÃ­nh lÃ  bÃ i toÃ¡n <b>tá»‘i Æ°u hÃ m nhiá»u biáº¿n</b> (biáº¿n lÃ  w vÃ  b).
    </div>
</div>

<div class="card">
    <h2>III. Gradient Descent cho 2 tham sá»‘ (w, b)</h2>

    <h3>1. Nháº¯c láº¡i Ã½ tÆ°á»Ÿng tá»« bÃ i 1</h3>
    <p>á» bÃ i 1, vá»›i hÃ m 1 biáº¿n f(x), ta cáº­p nháº­t:</p>
    <pre>x_new = x_old âˆ’ Î·Â·f'(x_old)</pre>
    <p>Trong Ä‘Ã³ Î· (eta) lÃ  <b>learning rate</b> â€“ bÆ°á»›c Ä‘i má»—i láº§n cáº­p nháº­t.</p>

    <h3>2. BÃ¢y giá» vá»›i 2 biáº¿n (w, b)</h3>
    <p>HÃ m máº¥t mÃ¡t L phá»¥ thuá»™c vÃ o 2 biáº¿n:</p>
    <pre>L = L(w, b)</pre>
    <p>Gradient (Ä‘áº¡o hÃ m riÃªng):</p>
    <pre>âˆ‚L/âˆ‚w = (2/n) Â· Î£ (wÂ·xáµ¢ + b âˆ’ yáµ¢)Â·xáµ¢
âˆ‚L/âˆ‚b = (2/n) Â· Î£ (wÂ·xáµ¢ + b âˆ’ yáµ¢)</pre>

    <p>Cáº­p nháº­t theo Gradient Descent:</p>
    <pre>w_new = w_old âˆ’ Î·Â·(âˆ‚L/âˆ‚w)
b_new = b_old âˆ’ Î·Â·(âˆ‚L/âˆ‚b)</pre>

    <div class="highlight">
        <b>Ã nghÄ©a:</b><br>
        â€“ Náº¿u âˆ‚L/âˆ‚w > 0, tá»©c tÄƒng w lÃ m Loss tÄƒng â†’ ta pháº£i giáº£m w.<br>
        â€“ Náº¿u âˆ‚L/âˆ‚b < 0, tá»©c tÄƒng b lÃ m Loss giáº£m â†’ ta nÃªn tÄƒng b (vÃ¬ trá»« sá»‘ Ã¢m thÃ nh cá»™ng).
    </div>
</div>

<div class="card">
    <h2>IV. Code Python â€“ Tá»± viáº¿t Linear Regression tá»« Ä‘áº§u</h2>
    <p>Pháº§n nÃ y há»c sinh cÃ³ thá»ƒ copy code Ä‘á»ƒ cháº¡y trÃªn VS Code, IDLE hoáº·c Google Colab.</p>

    <h3>1. Khá»Ÿi táº¡o dá»¯ liá»‡u & hÃ m Loss</h3>
    <button class="toggle-btn" onclick="toggleCode('code1')">Hiá»‡n/áº¨n code</button>
    <button class="copy-btn" onclick="copyCode('code1')">Copy</button>
    <pre id="code1" style="display:none;">
# Dá»¯ liá»‡u giÃ¡ nhÃ : diá»‡n tÃ­ch (m2) vÃ  giÃ¡ (triá»‡u)
X = [40, 60, 80, 100]
Y = [900, 1400, 1800, 2300]

n = len(X)

def predict(x, w, b):
    return w*x + b

def compute_loss(w, b):
    total = 0.0
    for i in range(n):
        y_pred = predict(X[i], w, b)
        total += (y_pred - Y[i])**2
    return total / n
    </pre>

    <h3>2. Thuáº­t toÃ¡n Gradient Descent há»c w vÃ  b (cÃ³ in tá»«ng bÆ°á»›c)</h3>
    <button class="toggle-btn" onclick="toggleCode('code2')">Hiá»‡n/áº¨n code</button>
    <button class="copy-btn" onclick="copyCode('code2')">Copy</button>
    <pre id="code2" style="display:none;">
X = [40, 60, 80, 100]
Y = [900, 1400, 1800, 2300]
n = len(X)

def predict(x, w, b):
    return w*x + b

def compute_loss(w, b):
    total = 0.0
    for i in range(n):
        y_pred = predict(X[i], w, b)
        total += (y_pred - Y[i])**2
    return total / n

# Khá»Ÿi táº¡o
w = 0.0
b = 0.0
learning_rate = 0.00001
epochs = 20000

print("Báº®T Äáº¦U QUÃ TRÃŒNH Há»ŒC...\n")
for epoch in range(epochs+1):
    dw = 0.0
    db = 0.0

    for i in range(n):
        y_pred = predict(X[i], w, b)
        error = y_pred - Y[i]
        dw += error * X[i]
        db += error

    dw = (2/n) * dw
    db = (2/n) * db

    w -= learning_rate * dw
    b -= learning_rate * db

    # In theo tá»«ng giai Ä‘oáº¡n
    if epoch % 2000 == 0:
        loss = compute_loss(w, b)
        print(f"Epoch {epoch:5d} | w={w:8.4f} | b={b:8.4f} | loss={loss:10.2f}")

print("\nKáº¾T THÃšC Há»ŒC")
print("w cuá»‘i cÃ¹ng =", w)
print("b cuá»‘i cÃ¹ng =", b)
print("Loss cuá»‘i cÃ¹ng =", compute_loss(w, b))
    </pre>

    <h3>3. DÃ¹ng mÃ´ hÃ¬nh Ä‘á»ƒ dá»± Ä‘oÃ¡n giÃ¡ nhÃ </h3>
    <button class="toggle-btn" onclick="toggleCode('code3')">Hiá»‡n/áº¨n code</button>
    <button class="copy-btn" onclick="copyCode('code3')">Copy</button>
    <pre id="code3" style="display:none;">
def predict(x, w, b):
    return w*x + b

# Giáº£ sá»­ sau khi train xong, ta cÃ³:
# (Báº¡n copy w, b in ra tá»« Ä‘oáº¡n code phÃ­a trÃªn)
w = 20.0
b = 100.0

areas = [50, 70, 120]
for a in areas:
    price = predict(a, w, b)
    print(f"Diá»‡n tÃ­ch {a:3d} m2 -> GiÃ¡ dá»± Ä‘oÃ¡n â‰ˆ {price:8.2f} triá»‡u")
    </pre>

    <div class="highlight">
        <b>Gá»£i Ã½ dáº¡y há»c:</b><br>
        â€“ Cho há»c sinh thay Ä‘á»•i <code>learning_rate</code> (0.000001, 0.0001, ...) Ä‘á»ƒ xem mÃ´ hÃ¬nh há»c nhanh/cháº­m ra sao.<br>
        â€“ Cho há»c sinh in thá»­ 10 dÃ²ng Ä‘áº§u vÃ  10 dÃ²ng cuá»‘i Ä‘á»ƒ xem w, b tiáº¿n dáº§n vá» giÃ¡ trá»‹ á»•n Ä‘á»‹nh.
    </div>
</div>

<div class="card">
    <h2>V. Demo trá»±c quan trÃªn web (JS mÃ´ phá»ng Python + váº½ biá»ƒu Ä‘á»“)</h2>

    <div class="two-col">
        <div>
            <p><b>1. MÃ´ phá»ng quÃ¡ trÃ¬nh há»c:</b></p>
            <p>Báº¥m nÃºt bÃªn dÆ°á»›i Ä‘á»ƒ xem JS thá»±c hiá»‡n Gradient Descent giá»‘ng há»‡t code Python, in ra w, b, loss theo tá»«ng giai Ä‘oáº¡n.</p>
            <button onclick="runDemo()">â–¶ Cháº¡y mÃ´ phá»ng há»c</button>
            <div id="console" class="console">Nháº¥n nÃºt Ä‘á»ƒ cháº¡y mÃ´ phá»ngâ€¦</div>
        </div>
        <div>
            <p><b>2. Biá»ƒu Ä‘á»“ trá»±c quan:</b></p>
            <p>Biá»ƒu Ä‘á»“ bÃªn dÆ°á»›i hiá»ƒn thá»‹:</p>
            <ul>
                <li>CÃ¡c Ä‘iá»ƒm dá»¯ liá»‡u tháº­t (x, y).</li>
                <li>ÄÆ°á»ng tháº³ng mÃ´ hÃ¬nh há»c Ä‘Æ°á»£c sau khi train.</li>
            </ul>
            <canvas id="plot" width="450" height="260"></canvas>
        </div>
    </div>
</div>

<script>
function toggleCode(id) {
    const el = document.getElementById(id);
    el.style.display = (el.style.display === "none") ? "block" : "none";
}
function copyCode(id) {
    const text = document.getElementById(id).innerText;
    navigator.clipboard.writeText(text);
    alert("ÄÃ£ copy code!");
}

// MÃ´ phá»ng Gradient Descent + update console & chart
function runDemo() {
    const logBox = document.getElementById("console");
    logBox.textContent = "";

    function log(msg) {
        logBox.textContent += msg + "\n";
        logBox.scrollTop = logBox.scrollHeight;
    }

    // Dá»¯ liá»‡u
    const X = [40, 60, 80, 100];
    const Y = [900, 1400, 1800, 2300];
    const n = X.length;

    // Khá»Ÿi táº¡o
    let w = 0.0;
    let b = 0.0;
    const lr = 0.00001;
    const epochs = 20000;

    function compute_loss(w, b) {
        let total = 0.0;
        for (let i = 0; i < n; i++) {
            const y_pred = w*X[i] + b;
            total += (y_pred - Y[i])**2;
        }
        return total / n;
    }

    log("Báº®T Äáº¦U MÃ” PHá»NG Há»ŒC LINEAR REGRESSION\n");

    for (let epoch = 0; epoch <= epochs; epoch++) {
        let dw = 0.0;
        let db = 0.0;
        for (let i = 0; i < n; i++) {
            const y_pred = w*X[i] + b;
            const error = y_pred - Y[i];
            dw += error * X[i];
            db += error;
        }
        dw = (2/n) * dw;
        db = (2/n) * db;

        w -= lr * dw;
        b -= lr * db;

        if (epoch % 2000 === 0) {
            const loss = compute_loss(w, b);
            log(`Epoch ${epoch.toString().padStart(5)} | w=${w.toFixed(4)} | b=${b.toFixed(4)} | loss=${loss.toFixed(2)}`);
        }
    }

    log("\nKáº¾T THÃšC MÃ” PHá»NG.");
    log(`w â‰ˆ ${w.toFixed(4)},  b â‰ˆ ${b.toFixed(4)}`);
    log("Báº¡n cÃ³ thá»ƒ copy w, b nÃ y Ä‘á»ƒ dÃ¹ng trong code Python dá»± Ä‘oÃ¡n.");

    // Sau khi há»c xong, váº½ biá»ƒu Ä‘á»“
    drawChart(X, Y, w, b);
}

// Váº½ biá»ƒu Ä‘á»“: Ä‘iá»ƒm dá»¯ liá»‡u + Ä‘Æ°á»ng há»“i quy
function drawChart(X, Y, w, b) {
    const canvas = document.getElementById("plot");
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const width = canvas.width;
    const height = canvas.height;

    // TÃ¬m min-max Ä‘á»ƒ scale
    const minX = Math.min(...X);
    const maxX = Math.max(...X);
    const minY = Math.min(...Y);
    const maxY = Math.max(...Y);

    function toCanvasX(x) {
        return 40 + (x - minX) / (maxX - minX) * (width - 80);
    }
    function toCanvasY(y) {
        // Ä‘áº£o chiá»u Y (trÃªn canvas, y tÄƒng xuá»‘ng dÆ°á»›i)
        return height - 30 - (y - minY) / (maxY - minY) * (height - 60);
    }

    // Váº½ trá»¥c Ä‘Æ¡n giáº£n
    ctx.strokeStyle = "#94a3b8";
    ctx.lineWidth = 1;
    // trá»¥c X
    ctx.beginPath();
    ctx.moveTo(40, height-30);
    ctx.lineTo(width-20, height-30);
    ctx.stroke();
    // trá»¥c Y
    ctx.beginPath();
    ctx.moveTo(40, height-20);
    ctx.lineTo(40, 20);
    ctx.stroke();

    // Váº½ Ä‘iá»ƒm dá»¯ liá»‡u
    ctx.fillStyle = "#dc2626";
    for (let i = 0; i < X.length; i++) {
        const cx = toCanvasX(X[i]);
        const cy = toCanvasY(Y[i]);
        ctx.beginPath();
        ctx.arc(cx, cy, 4, 0, Math.PI*2);
        ctx.fill();
    }

    // Váº½ Ä‘Æ°á»ng há»“i quy
    const x1 = minX, x2 = maxX;
    const y1 = w*x1 + b;
    const y2 = w*x2 + b;

    ctx.strokeStyle = "#2563eb";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(x1), toCanvasY(y1));
    ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
    ctx.stroke();

    // NhÃ£n nhá»
    ctx.fillStyle = "#0f172a";
    ctx.font = "12px Arial";
    ctx.fillText("Diá»‡n tÃ­ch (mÂ²)", width/2 - 30, height-8);
    ctx.save();
    ctx.translate(12, height/2 + 30);
    ctx.rotate(-Math.PI/2);
    ctx.fillText("GiÃ¡ (triá»‡u)", 0, 0);
    ctx.restore();
}
</script>

</body>
</html>
